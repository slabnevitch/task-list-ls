(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"1a33":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("b-row",{staticClass:"mb-3",attrs:{"align-v":"end"}},[s("b-col",{attrs:{md:"6"}},[s("h1",{staticClass:"mt-50"},[t._v("Список задач")]),s("b-form-select",{staticClass:"mb-3 mb-md-0",model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.options,(function(e){return s("b-form-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.text)+" ("+t._s(t.taskCounter(e.value))+")")])})),1)],1),s("b-col",{staticClass:"d-flex justify-content-center justify-content-md-end",attrs:{md:"6"}},[s("b-button",{attrs:{to:"/create",variant:"success",size:"lg"}},[t._v("Добавить задачу")])],1)],1)],1),s("div",{staticClass:"col-12"},[s("b-modal",{attrs:{id:"modal-1",title:"Удаление задачи"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.ok,r=e.cancel;return[s("b",[t._v("Custom Footer")]),s("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(t){return a()}}},[t._v(" Удалить ")]),s("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(t){return r()}}},[t._v(" Отмена ")])]}}])}),0==t.tasks.length?s("b-alert",{attrs:{show:"",variant:"warning"}},[t._v("В списке пока еще нет задач. Вы можете "),s("b-link",{attrs:{to:"/create"}},[t._v("создать")]),t._v(" задачу. ")],1):s("b-table",{attrs:{stacked:"lg",items:t.items,fields:t.fields,id:"my-table","per-page":t.perPage,"current-page":t.currentPage},scopedSlots:t._u([{key:"cell(Название)",fn:function(e){return[s("h5",{domProps:{innerHTML:t._s(e.value)}})]}},{key:"cell(Окончание)",fn:function(e){return[s("div",{domProps:{innerHTML:t._s(e.value)}})]}},{key:"cell(Описание)",fn:function(e){return[s("div",{staticClass:"trim-dotted"},[s("p",{domProps:{textContent:t._s(e.value)}})])]}},{key:"cell(Стаус)",fn:function(e){return[s("div",{staticClass:"alert",class:"alert-"+t.taskStatusMessages[e.value].selector,attrs:{role:"alert","aria-live":"polite","aria-atomic":"true"}},[t._v(t._s(t.taskStatusMessages[e.value].name))])]}},{key:"cell(Редактирование)",fn:function(e){return[s("router-link",{staticClass:"btn btn-secondary",attrs:{tag:"button",to:"/task/"+e.value,size:"sm"}},[t._v("Открыть")])]}},{key:"cell(Удаление)",fn:function(e){return[s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"del-button",attrs:{title:"Удалить задачу"},on:{click:function(s){return t.removeConfirm(e.value)}}},[s("b-icon",{staticStyle:{width:"20px",height:"20px",cursor:"pointer"},attrs:{href:"#",icon:"x-circle-fill"}})],1)]}}])}),s("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},r=[],n=(s("a4d3"),s("e01a"),s("99af"),s("4de4"),s("7db0"),s("d81d"),s("5530")),i=s("19ec"),o=s("5408"),c=s("442a"),u=s("4fcb"),l={name:"List",data:function(){return{perPage:4,currentPage:1,taskStatusMessages:o["a"],fields:[{key:"Название",sortable:!1},{key:"Окончание",sortable:!1},{key:"Описание",sortable:!1},{key:"Стаус",sortable:!1},{key:"Редактирование",sortable:!1},{key:"Удаление",sortable:!1}],selected:null,options:[{value:null,text:"Все"},{value:"active",text:"Активные"},{value:"completed",text:"Завершенные"},{value:"outdated",text:"Просроченные"}]}},methods:{taskCounter:function(t){return console.log(t),this.statusedTasks.filter((function(e){return!t||e.status===t})).length},formatedDeadline:function(t){var e=Object(i["a"])(new Date),s=Object(i["a"])(new Date(t)),a={hours:s.diff(e,"hours"),days:s.diff(e,"days"),weeks:s.diff(e,"weeks"),months:s.diff(e,"months"),years:s.diff(e,"years")};return a.years>0?"больше года":a.months>0?a.months+" месяцев":a.weeks>0?a.weeks+" недель":a.days>0?a.days+" дней":0==a.days?a.hours+" часов":void 0},removeTask:function(t){console.log(t);var e=this.$store.getters.getTasks.find((function(e){return e.id===t})).title;this.$store.dispatch("removeTask",t),this.makeToast(e,"remove")},removeConfirm:function(t){var e=this;this.$bvModal.msgBoxConfirm("Задача в настоящее время активна. Удалить все равно?").then((function(s){console.log(s),s&&e.removeTask(t)})).catch((function(t){}))},countOfStatusedTasks:function(t){return this.items.filter((function(e){return e.status===t})).length}},computed:{tasks:function(){return this.$store.getters.getTasks},statusedTasks:function(){return this.dateFilteredTasks.map((function(t){return Object(n["a"])(Object(n["a"])({},t),{},{status:new Date(t.date)>new Date&&"completed"!==t.status?"active":"completed"===t.status?"completed":"outdated"})}))},filteredTasks:function(){var t=this;return this.statusedTasks.filter((function(e){return!t.selected||e.status===t.selected}))},dateFilteredTasks:function(){return this.tasks.sort((function(t,e){return+new Date(t.date)-+new Date(e.date)}))},rows:function(){return this.filteredTasks.length},items:function(){var t=this;return this.filteredTasks.map((function(e,s){return{"Название":e.title,"Окончание":"outdated"!==e.status&&"completed"!==e.status?"".concat(Object(c["a"])(e.date)," <div><b>Осталось:</b> ").concat(t.formatedDeadline(Object(i["a"])(e.date)),"</div>"):Object(c["a"])(e.date),"Описание":e.description,"Стаус":e.status,"Редактирование":e.id,"Удаление":e.id}}))}},mixins:[u["a"]]},d=l,f=(s("ebb3"),s("2877")),m=Object(f["a"])(d,a,r,!1,null,null,null);e["default"]=m.exports},"1d21":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[t._m(0),s("div",{staticClass:"col-md-6"},[s("b-jumbotron",[s("h1",[t._v(t._s(t.currentTask[0].title))]),s("p",[t._v(t._s(t.currentTask[0].description))]),s("h4",[t._v("Состояние "),s("b-badge",{attrs:{variant:t.taskStatusMessages[t.currentTask[0].status].selector}},[t._v(t._s(t.taskStatusMessages[t.currentTask[0].status].name))])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"completed"!==t.currentTask[0].status,expression:"currentTask[0].status !== 'completed'"}],staticClass:"after-end",style:t.isOutdated},[s("p",{staticClass:"h1 mb-2"},[s("b-icon",{attrs:{icon:"clock-history"}})],1),"active"===t.currentTask[0].status?s("span",{staticClass:"ml-3"},[s("b",[t._v(t._s(t.$deadline(t.currentTask[0].date)))])]):s("span",{staticClass:"ml-3"},[s("b",[t._v(t._s(t._f("datefilter")(t.currentTask[0].date)))])])])])],1),s("div",{staticClass:"col-md-6"},[s("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("b-form-group",{directives:[{name:"show",rawName:"v-show",value:"active"===t.currentTask[0].status,expression:"currentTask[0].status === 'active'"}],attrs:{label:"Название задачи","label-for":"input-formatter"}},[s("b-form-input",{attrs:{id:"input-formatter",state:t.nameState,placeholder:"Например, Купить газету"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),s("b-form-invalid-feedback",{attrs:{id:"input-formatter-feedback"}},[t._v("Пожалуйста, введите название задачи")])],1),s("b-form-group",{directives:[{name:"show",rawName:"v-show",value:"active"===t.currentTask[0].status,expression:"currentTask[0].status === 'active'"}],attrs:{label:"Описание задачи"}},[s("b-form-textarea",{attrs:{id:"textarea-formatter",placeholder:"Например, Газетный киоск открывается в 8:00"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"active"===t.currentTask[0].status,expression:"currentTask[0].status === 'active'"}]},[s("label",{attrs:{for:"tags-basic"}},[t._v("Тэги")]),s("b-form-tags",{attrs:{"input-id":"tags-basic",placeholder:"Тэги, характеризующие задачу"},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"active"===t.currentTask[0].status,expression:"currentTask[0].status === 'active'"}],staticClass:"mt-3"},[s("label",{attrs:{for:"example-datepicker"}},[t._v("Укажите дату окончания задачи")]),s("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"example-datepicker","date-disabled-fn":t.dateDisabled,placeholder:"Дата не выбрана"},model:{value:t.deadline,callback:function(e){t.deadline=e},expression:"deadline"}})],1),s("b-button",{staticClass:"mr-2",attrs:{disabled:t.isCompleted,type:"button",variant:"danger"},on:{click:function(e){return e.preventDefault(),t.complete(e)}}},[t._v("Завершит задачу")]),s("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.isCompleted&&!t.isEdited,expression:"!isCompleted && !isEdited"}],attrs:{type:"submit",variant:"success"}},[t._v("Сохранить изменения")]),s("b-button",{staticClass:"ml-2",on:{click:function(e){return e.preventDefault(),t.$router.push("/")}}},[t._v("Отмена")]),s("b-alert",{directives:[{name:"show",rawName:"v-show",value:"active"!==t.currentTask[0].status,expression:"currentTask[0].status !== 'active'"}],staticClass:"mt-3",attrs:{show:"",variant:"warning"}},[t._v("Допускается редактирование только "),s("b",[t._v("активных ")]),t._v("задач")])],1)])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("h2",{staticClass:"mt-4 mb-3"},[t._v("Редактирование задачи")]),s("hr")])}],n=(s("a4d3"),s("e01a"),s("4de4"),s("d81d"),s("5530")),i=s("5408"),o=s("4fcb"),c={name:"Task",data:function(){return{title:"",description:"",tags:[],deadline:"",status:"",taskStatusMessages:i["a"],id:""}},methods:{submit:function(){var t={title:this.title,description:this.description,id:this.currentTask[0].id,status:this.status,tags:this.tags,date:this.deadline};this.titleValidate()&&(this.$store.dispatch("editTask",t),this.$router.push("/"),"completed"!==t.status&&this.makeToast(t.title,"edit"))},complete:function(){this.titleValidate()&&(this.status="completed",this.submit(),this.makeToast(this.title,"finish"))},dateDisabled:function(t,e){return e<new Date},titleValidate:function(){return this.nameState}},created:function(){this.title=this.currentTask[0].title,this.description=this.currentTask[0].description,this.tags=this.currentTask[0].tags,this.deadline=this.currentTask[0].date,this.status=this.currentTask[0].status},computed:{isOutdated:function(){return"outdated"==this.currentTask[0].status?{opacity:".2"}:null},currentTask:function(){var t=this;return this.$store.getters.getTasks.filter((function(e){return e.id===+t.$route.params.id})).map((function(t){return Object(n["a"])(Object(n["a"])({},t),{},{status:new Date(t.date)>new Date&&"completed"!==t.status?"active":"completed"===t.status?"completed":"outdated"})}))},isCompleted:function(){return"completed"===this.status},isEdited:function(){return this.title===this.currentTask[0].title&&this.description===this.currentTask[0].description&&this.tags===this.currentTask[0].tags&&this.deadline===this.currentTask[0].date&&this.status===this.currentTask[0].status},nameState:function(){return this.title.length>0}},mixins:[o["a"]]},u=c,l=(s("c0e7"),s("2877")),d=Object(l["a"])(u,a,r,!1,null,"0eb27a75",null);e["default"]=d.exports},"50f6":function(t,e,s){},5408:function(t,e,s){"use strict";e["a"]={active:{name:"В работе",selector:"success"},completed:{name:"Завершенa",selector:"light"},outdated:{name:"Просрочена",selector:"danger"}}},5530:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b");function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}},7547:function(t,e,s){},"7db0":function(t,e,s){"use strict";var a=s("23e7"),r=s("b727").find,n=s("44d2"),i=s("ae40"),o="find",c=!0,u=i(o);o in[]&&Array(1)[o]((function(){c=!1})),a({target:"Array",proto:!0,forced:c||!u},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(o)},c0e7:function(t,e,s){"use strict";s("50f6")},dbb4:function(t,e,s){var a=s("23e7"),r=s("83ab"),n=s("56ef"),i=s("fc6a"),o=s("06cf"),c=s("8418");a({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,s,a=i(t),r=o.f,u=n(a),l={},d=0;while(u.length>d)s=r(a,e=u[d++]),void 0!==s&&c(l,e,s);return l}})},e439:function(t,e,s){var a=s("23e7"),r=s("d039"),n=s("fc6a"),i=s("06cf").f,o=s("83ab"),c=r((function(){i(1)})),u=!o||c;a({target:"Object",stat:!0,forced:u,sham:!o},{getOwnPropertyDescriptor:function(t,e){return i(n(t),e)}})},ebb3:function(t,e,s){"use strict";s("7547")}}]);
//# sourceMappingURL=about.ee35573d.js.map